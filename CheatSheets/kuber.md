# Архитектура и основные компоненты Kubernetes

 | Компонент | Описание |
 |----------------------------|--------------------------------------------------------------------------|
 | **Master Node** | Управляет кластером, содержит ключевые компоненты управления. |
 | kube-apiserver | Основной компонент, обрабатывает все API запросы. |
 | etcd | Хранилище данных для всех данных кластера. |
 | kube-scheduler | Назначает поды (Pods) на узлы (Nodes). |
 | kube-controller-manager | Управляет контроллерами, такими как Replication Controller. |
 | cloud-controller-manager | Управляет взаимодействием с облачными провайдерами. |
 | **Worker Node** | Выполняет контейнеры, управляет сетевыми и хранилищными ресурсами. |
 | kubelet | Агент, который запускает и управляет контейнерами на узле. |
 | kube-proxy | Управляет сетевыми правилами и маршрутизацией. |
 | **Pod** | Основная единица развертывания и управления в Kubernetes. |
 | **Service** | Определяет логическую группу подов и политику доступа к ним. |
 | **Deployment** | Управляет развертыванием и обновлением подов. |
 | **ReplicaSet** | Обеспечивает заданное количество реплик подов. |
 | **StatefulSet** | Управляет состоянием подов, поддерживает постоянные идентификаторы. |
 | **DaemonSet** | Обеспечивает запуск пода на каждом узле или подмножестве узлов. |
 | **ConfigMap** | Хранит конфигурационные данные в виде пар ключ-значение. |
 | **Secret** | Хранит конфиденциальные данные, такие как пароли и ключи. |
 | **Namespace** | Логическое разделение ресурсов в кластере. |
 | **Ingress** | Управляет внешним доступом к сервисам в кластере, обычно через HTTP/HTTPS. |

# Операции в Kubernetes

 | Операция | Описание | Для чего нужна | В каких компонентах используется | Как это делается |
 |---------------------------|--------------------------------------------------------------------------|-----------------------------------------------------------------------|-----------------------------------------------------------------------|-----------------------------------------------------------------------|
 | **kubectl create** | Создает новые ресурсы в кластере. | Создание новых подов, деплойментов, сервисов и других ресурсов. | kube-apiserver | `kubectl create deployment my-deployment --image=nginx` |
 | **kubectl get** | Получает информацию о ресурсах. | Просмотр текущего состояния ресурсов. | kube-apiserver | `kubectl get pods` |
 | **kubectl describe** | Показывает подробную информацию о ресурсе. | Получение детальной информации о конкретном ресурсе. | kube-apiserver | `kubectl describe pod my-pod` |
 | **kubectl apply** | Применяет конфигурацию к ресурсам. | Обновление или создание ресурсов на основе конфигурационных файлов. | kube-apiserver | `kubectl apply -f my-deployment.yaml` |
 | **kubectl delete** | Удаляет ресурсы из кластера. | Удаление подов, деплойментов, сервисов и других ресурсов. | kube-apiserver | `kubectl delete deployment my-deployment` |
 | **kubectl edit** | Редактирует ресурсы в реальном времени. | Изменение конфигурации ресурсов напрямую. | kube-apiserver | `kubectl edit deployment my-deployment` |
 | **kubectl exec** | Выполняет команду в контейнере. | Выполнение команд внутри контейнеров для диагностики и управления. | kubelet | `kubectl exec -it my-pod -- /bin/bash` |
 | **kubectl logs** | Показывает логи контейнера. | Просмотр логов контейнеров для диагностики. | kubelet | `kubectl logs my-pod` |
 | **kubectl port-forward** | Перенаправляет порт из кластера на локальную машину. | Доступ к сервисам в кластере через локальную машину. | kube-apiserver, kubelet | `kubectl port-forward my-pod 8080:80` |
 | **kubectl scale** | Масштабирует количество реплик пода. | Изменение количества реплик для деплойментов или репликасетов. | kube-apiserver, kube-controller-manager | `kubectl scale deployment my-deployment --replicas=3` |
 | **kubectl rollout** | Управляет развертыванием и откатом ресурсов. | Просмотр состояния развертывания и управление откатами. | kube-apiserver, kube-controller-manager | `kubectl rollout status deployment my-deployment` |
 | **kubectl config** | Управляет конфигурацией kubectl. | Настройка конфигурации для взаимодействия с кластером. | kubectl | `kubectl config set-context my-context --cluster=my-cluster --user=my-user` |
 | **kubectl cluster-info** | Показывает информацию о кластере. | Просмотр информации о кластере и его компонентах. | kube-apiserver | `kubectl cluster-info` |
 | **kubectl top** | Показывает использование ресурсов (CPU, память) подов и узлов. | Мониторинг использования ресурсов. | kube-apiserver, kubelet | `kubectl top pods` |
 | **kubectl cordon** | Помечает узел как недоступный для новых подов. | Предотвращение развертывания новых подов на узле перед обслуживанием. | kube-apiserver, kubelet | `kubectl cordon my-node` |
 | **kubectl drain** | Удаляет все поды с узла перед его обслуживанием. | Подготовка узла к обслуживанию путем удаления всех подов. | kube-apiserver, kubelet | `kubectl drain my-node --ignore-daemonsets` |
 | **kubectl uncordon** | Удаляет метку недоступности с узла. | Возвращение узла в рабочее состояние после обслуживания. | kube-apiserver, kubelet | `kubectl uncordon my-node` |
 | **kubectl taint** | Добавляет или удаляет загрязнения (taints) с узлов. | Управление загрязнениями для контроля развертывания подов на узлах. | kube-apiserver, kubelet | `kubectl taint nodes my-node key=value:NoSchedule` |
 | **kubectl label** | Добавляет или удаляет метки с ресурсов. | Управление метками для организации и фильтрации ресурсов. | kube-apiserver | `kubectl label pods my-pod key=value` |
 | **kubectl annotate** | Добавляет или удаляет аннотации с ресурсов. | Управление аннотациями для хранения метаданных. | kube-apiserver | `kubectl annotate pods my-pod key=value` |

# Основные термины Kubernetes

 | Термин | Описание |
 |---------------------------|--------------------------------------------------------------------------|
 | **Cluster** (Кластер) | Группа узлов (nodes), управляемых мастер-узлом (master node), которые работают вместе для выполнения контейнеризованных приложений. Кластер обеспечивает высокую доступность и масштабируемость приложений. Используется для развертывания, управления и мониторинга контейнеров. |
 | **Node** (Узел) | Сервер, который является частью кластера Kubernetes и выполняет контейнеры. Узлы могут быть как мастер-узлами, так и рабочими узлами. Рабочие узлы выполняют контейнеры, а мастер-узлы управляют кластером. |
 | **Master Node** (Мастер-узел) | Управляет кластером, содержит ключевые компоненты управления, такие как kube-apiserver, etcd, kube-scheduler и kube-controller-manager. Мастер-узел отвечает за управление состоянием кластера и распределение подов по узлам. |
 | **Worker Node** (Рабочий узел) | Выполняет контейнеры, управляет сетевыми и хранилищными ресурсами. Рабочие узлы содержат компоненты kubelet и kube-proxy, которые запускают и управляют контейнерами на узле. |
 | **Pod** (Под) | Основная единица развертывания и управления в Kubernetes. Содержит один или несколько контейнеров, которые разделяют ресурсы и сеть. Поды используются для запуска приложений и их компонентов. |
 | **Service** (Сервис) | Определяет логическую группу подов и политику доступа к ним. Сервисы обеспечивают стабильный сетевой адрес и балансировку нагрузки для подов. Используются для предоставления доступа к приложениям внутри и вне кластера. |
 | **Deployment** (Развертывание) | Управляет развертыванием и обновлением подов. Деплойменты обеспечивают декларативное управление состоянием подов, включая масштабирование и обновление. Используются для автоматизации развертывания и управления жизненным циклом приложений. |
 | **ReplicaSet** (Набор реплик) | Обеспечивает заданное количество реплик подов. ReplicaSet гарантирует, что указанное количество реплик подов всегда запущено. Используется для обеспечения высокой доступности и масштабируемости приложений. |
 | **StatefulSet** (Набор состояний) | Управляет состоянием подов, поддерживает постоянные идентификаторы. StatefulSet обеспечивает устойчивость и порядок развертывания подов. Используется для управления состоянием приложений, таких как базы данных. |
 | **DaemonSet** (Демон-набор) | Обеспечивает запуск пода на каждом узле или подмножестве узлов. DaemonSet гарантирует, что под будет запущен на каждом узле, что полезно для системных демонов, таких как логирование и мониторинг. |
 | **ConfigMap** (Конфигурационная карта) | Хранит конфигурационные данные в виде пар ключ-значение. ConfigMap используется для хранения и управления конфигурационными данными, которые могут быть использованы подами. |
 | **Secret** (Секрет) | Хранит конфиденциальные данные, такие как пароли и ключи. Секреты обеспечивают безопасное хранение и управление конфиденциальной информацией, которая может быть использована подами. |
 | **Namespace** (Пространство имен) | Логическое разделение ресурсов в кластере. Пространства имен используются для организации и управления ресурсами в кластере, обеспечивая изоляцию и управление доступом. |
 | **Ingress** (Вход) | Управляет внешним доступом к сервисам в кластере, обычно через HTTP/HTTPS. Ingress обеспечивает маршрутизацию внешнего трафика к сервисам в кластере, включая балансировку нагрузки и SSL-терминацию. |
 | **kube-apiserver** (API-сервер Kubernetes) | Основной компонент, обрабатывает все API запросы. kube-apiserver предоставляет интерфейс для взаимодействия с кластером и управления его состоянием. Используется для выполнения всех операций с ресурсами кластера. |
 | **etcd** (etcd) | Хранилище данных для всех данных кластера. etcd используется для хранения состояния кластера и всех конфигурационных данных. Используется для обеспечения согласованности и высокой доступности данных кластера. |
 | **kube-scheduler** (Планировщик Kubernetes) | Назначает поды (Pods) на узлы (Nodes). kube-scheduler отвечает за распределение подов по узлам на основе доступных ресурсов и политик планирования. Используется для обеспечения оптимального размещения подов в кластере. |
 | **kube-controller-manager** (Менеджер контроллеров Kubernetes) | Управляет контроллерами, такими как Replication Controller. kube-controller-manager отвечает за управление состоянием ресурсов кластера, включая создание и удаление подов. Используется для обеспечения согласованности состояния кластера. |
 | **cloud-controller-manager** (Менеджер облачных контроллеров) | Управляет взаимодействием с облачными провайдерами. cloud-controller-manager отвечает за интеграцию с облачными провайдерами, включая управление сетевыми и хранилищными ресурсами. Используется для обеспечения взаимодействия кластера с облачной инфраструктурой. |
 | **kubelet** (kubelet) | Агент, который запускает и управляет контейнерами на узле. kubelet отвечает за запуск и управление контейнерами на рабочих узлах. Используется для обеспечения выполнения контейнеров и управления их жизненным циклом. |
 | **kube-proxy** (kube-proxy) | Управляет сетевыми правилами и маршрутизацией. kube-proxy отвечает за управление сетевыми правилами и маршрутизацией трафика между подами и узлами. Используется для обеспечения сетевой связи внутри кластера. |
 | **kubectl** (kubectl) | Командная строка для взаимодействия с кластером Kubernetes. kubectl предоставляет интерфейс командной строки для выполнения операций с ресурсами кластера. Используется для управления и мониторинга кластера. |
 | **Volume** (Том) | Хранилище данных, которое может быть использовано подами. Томы обеспечивают постоянное хранилище для данных, которые могут быть использованы подами. Используются для хранения данных, которые должны сохраняться между перезапусками подов. |
 | **PersistentVolume (PV)** (Постоянный том) | Ресурс хранилища, который может быть использован подами. PV обеспечивает постоянное хранилище для данных, которые могут быть использованы подами. Используется для хранения данных, которые должны сохраняться между перезапусками подов. |
 | **PersistentVolumeClaim (PVC)** (Запрос на постоянный том) | Запрос на ресурс хранилища, который может быть использован подами. PVC используется для запроса постоянного хранилища для подов. Используется для обеспечения доступа подов к постоянному хранилищу. |
 | **NetworkPolicy** (Сетевая политика) | Определяет правила сетевого доступа для подов. Сетевые политики используются для управления сетевым доступом между подами и узлами. Используются для обеспечения безопасности и изоляции сетевого трафика. |
 | **Role** (Роль) | Определяет набор разрешений для доступа к ресурсам в кластере. Роли используются для управления доступом к ресурсам в пространстве имен. Используются для обеспечения безопасности и управления доступом. |
 | **RoleBinding** (Связывание роли) | Связывает роль с пользователями или группами. RoleBinding используется для присвоения ролей пользователям или группам в пространстве имен. Используется для управления доступом к ресурсам. |
 | **ClusterRole** (Роль кластера) | Определяет набор разрешений для доступа к ресурсам на уровне кластера. ClusterRole используется для управления доступом к ресурсам на уровне всего кластера. Используется для обеспечения безопасности и управления доступом. |
 | **ClusterRoleBinding** (Связывание роли кластера) | Связывает ClusterRole с пользователями или группами. ClusterRoleBinding используется для присвоения ролей кластера пользователям или группам. Используется для управления доступом к ресурсам на уровне кластера. |
 | **ServiceAccount** (Служебная учетная запись) | Учетная запись для подов, используемая для аутентификации и авторизации. ServiceAccount используется для управления доступом подов к ресурсам кластера. Используется для обеспечения безопасности и управления доступом. |
 | **CRD (Custom Resource Definition)** (Определение пользовательского ресурса) | Определяет пользовательские ресурсы, которые могут быть управляемы через API Kubernetes. CRD используется для расширения функциональности Kubernetes путем определения пользовательских ресурсов. Используется для создания и управления пользовательскими ресурсами. |
 | **Operator** (Оператор) | Паттерн для управления сложными приложениями и их жизненным циклом. Операторы используются для автоматизации управления сложными приложениями, включая их развертывание, обновление и восстановление. Используются для обеспечения автоматизации и управления жизненным циклом приложений. |
 | **Helm** (Helm) | Пакетный менеджер для Kubernetes, который упрощает развертывание и управление приложениями. Helm используется для упаковки, развертывания и управления приложениями в Kubernetes. Используется для упрощения управления жизненным циклом приложений. |
 | **Taint** (Загрязнение) | Механизм для управления развертыванием подов на узлах. Загрязнения используются для предотвращения развертывания подов на определенных узлах. Используются для управления развертыванием подов в кластере. |
 | **Toleration** (Толерантность) | Механизм для управления развертыванием подов на узлах с загрязнениями (taints). Толерантности используются для разрешения развертывания подов на узлах с загрязнениями. Используются для управления развертыванием подов в кластере. |
 | **Affinity** (Аффинность) | Механизм для управления развертыванием подов на узлах с учетом предпочтений. Аффинности используются для развертывания подов на узлах с учетом предпочтений, таких как совместное размещение или разделение. Используются для управления развертыванием подов в кластере. |
 | **Anti-Affinity** (Анти-аффинность) | Механизм для управления развертыванием подов на узлах с учетом избегания. Анти-аффинности используются для развертывания подов на узлах с учетом избегания, таких как разделение подов на разные узлы. Используются для управления развертыванием подов в кластере. |
 | **Horizontal Pod Autoscaler (HPA)** (Горизонтальный автоскейлер подов) | Автоматически масштабирует количество реплик подов на основе метрик. HPA используется для автоматического масштабирования количества реплик подов в ответ на изменения нагрузки. Используется для обеспечения масштабируемости и высокой доступности приложений. |
 | **Vertical Pod Autoscaler (VPA)** (Вертикальный автоскейлер подов) | Автоматически масштабирует ресурсы (CPU, память) для подов. VPA используется для автоматического масштабирования ресурсов подов в ответ на изменения нагрузки. Используется для обеспечения оптимального использования ресурсов. |
 | **Pod Disruption Budget (PDB)** (Бюджет нарушений подов) | Определяет минимальное количество доступных подов во время обслуживания. PDB используется для обеспечения минимального количества доступных подов во время обслуживания узлов. Используется для обеспечения высокой доступности приложений. |
 | **Pod Security Policy (PSP)** (Политика безопасности подов) | Определяет правила безопасности для подов. PSP используется для управления безопасностью подов, включая контроль доступа и изоляцию. Используется для обеспечения безопасности и управления доступом. |
 | **Admission Controller** (Контроллер допуска) | Механизм для проверки и изменения запросов к API перед их применением. Контроллеры допуска используются для обеспечения безопасности и согласованности запросов к API. Используются для проверки и изменения запросов к API перед их применением. |
 | **MutatingAdmissionWebhook** (Изменяющий вебхук допуска) | Вебхук для изменения запросов к API перед их применением. MutatingAdmissionWebhook используется для изменения запросов к API перед их применением. Используется для обеспечения безопасности и согласованности запросов к API. |
 | **ValidatingAdmissionWebhook** (Проверяющий вебхук допуска) | Вебхук для проверки запросов к API перед их применением. ValidatingAdmissionWebhook используется для проверки запросов к API перед их применением. Используется для обеспечения безопасности и согласованности запросов к API. |
